<div class="tutorials-list-container">
  <!-- Roadmap Pipeline Section -->
  <section class="roadmap-pipeline-section py-5">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="roadmap-header text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">
            FULL STACK DEVELOPER ROADMAP
            </h2>
            <p class="lead text-muted">
              Backend: Java 17/21 + Spring Boot 3.x | Frontend: Angular 19 +
              TypeScript 5
            </p>
          </div>
        </div>
      </div>

      <!-- Roadmap Pipeline -->
      <div class="roadmap-pipeline">
        <!-- Main Pipeline Line -->
        <div class="pipeline-line">
          <div class="flowing-line"></div>
          <div
            class="pipeline-progress"
            [style.height]="getProgressHeight()"
          ></div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-indicator">
          <div
            class="progress-bubble"
            [style.top]="getProgressBubblePosition()"
          >
            <div class="bubble-content">
              <span class="progress-text">{{ getProgressPercentage() }}%</span>
            </div>
            <div class="bubble-arrow"></div>
          </div>
        </div>

        <!-- Roadmap Steps -->
        <div class="roadmap-steps-container">
          <!-- Backend Steps -->
          <div class="roadmap-section-label backend-label">
            <h4>BACKEND DEVELOPMENT</h4>
          </div>

          <!-- Backend Steps -->
          <div
            *ngFor="let step of backendSteps; let i = index"
            class="roadmap-step"
            [class.active]="step.isActive"
            [class.step-left]="i % 2 === 0"
            [class.step-right]="i % 2 === 1"
            [class.step-clickable]="hasTutorial(step)"
            [class.step-disabled]="!hasTutorial(step)"
            [attr.data-step-id]="step.id"
            (click)="onRoadmapStepClick(step)"
            (mouseenter)="pauseAnimation()"
            (mouseleave)="resumeAnimation()"
          >
            <!-- Step Connector -->
            <div
              class="step-connector"
              [class.connector-left]="i % 2 === 0"
              [class.connector-right]="i % 2 === 1"
            ></div>

            <!-- Step Content -->
            <div class="step-content">
              <div class="step-header">
                <div class="step-number">{{ step.order }}</div>
                <div class="step-title-section">
                  <h5 class="step-title">{{ step.title }}</h5>
                  <div
                    class="step-badge"
                    [class]="getStepBadgeClassForStep(step)"
                  >
                    {{ getStepBadgeTextForStep(step) }}
                  </div>
                </div>
              </div>
              <p class="step-description">{{ step.description }}</p>

              <!-- Technologies -->
              <div class="step-technologies">
                <span
                  *ngFor="let tech of step.technologies.slice(0, 4)"
                  class="tech-tag"
                >
                  {{ tech }}
                </span>
                <span *ngIf="step.technologies.length > 4" class="tech-more">
                  +{{ step.technologies.length - 4 }} more
                </span>
              </div>

              <!-- Progress Bar -->
              <div class="step-progress">
                <div class="progress" style="height: 6px">
                  <div
                    class="progress-bar"
                    [style.width]="getStepProgress(step) + '%'"
                    [class]="getStepProgressClassSafe(step)"
                  ></div>
                </div>
                <small>
                  {{ getStepTutorialsCount(step) }}/{{ step.totalTopics || 1 }}
                  topics
                  <span
                    *ngIf="getStepTutorialsCount(step) > 0"
                    class="text-primary"
                  >
                    • {{ getStepTutorialsCount(step) }} tutorials available
                  </span>
                  <span
                    *ngIf="getStepTutorialsCount(step) === 0"
                    class="text-muted"
                  >
                    • No tutorials yet
                  </span>
                </small>
              </div>

              <!-- Click Indicator for steps with tutorials -->
              <div *ngIf="hasTutorial(step)" class="click-indicator">
                <i class="fas fa-book-open me-1"></i>
                Click to read tutorial
              </div>
            </div>
          </div>

          <!-- Frontend Section Label -->
          <div class="roadmap-section-label frontend-label">
            <h4>FRONTEND DEVELOPMENT</h4>
          </div>

          <!-- Frontend Steps -->
          <div
            *ngFor="let step of frontendSteps; let i = index"
            class="roadmap-step"
            [class.active]="step.isActive"
            [class.step-left]="i % 2 === 0"
            [class.step-right]="i % 2 === 1"
            [class.step-clickable]="hasTutorial(step)"
            [class.step-disabled]="!hasTutorial(step)"
            [attr.data-step-id]="step.id"
            (click)="onRoadmapStepClick(step)"
            (mouseenter)="pauseAnimation()"
            (mouseleave)="resumeAnimation()"
          >
            <!-- Step Connector -->
            <div
              class="step-connector"
              [class.connector-left]="i % 2 === 0"
              [class.connector-right]="i % 2 === 1"
            ></div>

            <!-- Step Content -->
            <div class="step-content">
              <div class="step-header">
                <div class="step-number">{{ step.order }}</div>
                <div class="step-title-section">
                  <h5 class="step-title">{{ step.title }}</h5>
                  <div
                    class="step-badge"
                    [class]="getStepBadgeClassForStep(step)"
                  >
                    {{ getStepBadgeTextForStep(step) }}
                  </div>
                </div>
              </div>
              <p class="step-description">{{ step.description }}</p>

              <!-- Technologies -->
              <div class="step-technologies">
                <span
                  *ngFor="let tech of step.technologies.slice(0, 4)"
                  class="tech-tag"
                >
                  {{ tech }}
                </span>
                <span *ngIf="step.technologies.length > 4" class="tech-more">
                  +{{ step.technologies.length - 4 }} more
                </span>
              </div>

              <!-- Progress Bar -->
              <div class="step-progress">
                <div class="progress" style="height: 6px">
                  <div
                    class="progress-bar"
                    [style.width]="getStepProgress(step) + '%'"
                    [class]="getStepProgressClassSafe(step)"
                  ></div>
                </div>
                <small>
                  {{ getStepTutorialsCount(step) }}/{{ step.totalTopics || 1 }}
                  topics
                  <span
                    *ngIf="getStepTutorialsCount(step) > 0"
                    class="text-primary"
                  >
                    • {{ getStepTutorialsCount(step) }} tutorials available
                  </span>
                  <span
                    *ngIf="getStepTutorialsCount(step) === 0"
                    class="text-muted"
                  >
                    • No tutorials yet
                  </span>
                </small>
              </div>

              <!-- Click Indicator for steps with tutorials -->
              <div *ngIf="hasTutorial(step)" class="click-indicator">
                <i class="fas fa-book-open me-1"></i>
                Click to read tutorial
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
